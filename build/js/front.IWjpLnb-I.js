(()=>{"use strict";var e={n:t=>{var i=t&&t.__esModule?()=>t.default:()=>t;return e.d(i,{a:i}),i},d:(t,i)=>{for(var l in i)e.o(i,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:i[l]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=jQuery;var i,l=e.n(t);l()(document).ready((function(){let e=l()("#filter-form");l()(".filter-more").on("click",(function(e){e.preventDefault(),l()(this).collapse("collapsed","hide-filter-more")})),l()(".filter-list-plus").on("click",(function(e){e.preventDefault(),l()(this).collapse("collapsed","d-none")})),l()("#filter-reset").on("click",(function(e){e.preventDefault(),l()(this).removeFilterField(!0)})),l()(".remove-filter").on("click",(function(e){e.preventDefault(),l()(this).removeFilterField()})),e.on("submit",(function(e){e.preventDefault();let t,i=l()(this),n={},r=i.data("submit");i.find("#spinner").removeClass("d-none"),i.data("submit",null),t=i.find("input, select").not(".preview"),l().each(t,(function(e,t){let i,o=(t=l()(t)).attr("name"),s=null;t.is(":checkbox")||t.is(":radio")?t.prop("checked")&&(s=t.val()):s=t.val(),PMPRUtil.isEmpty(s)||!s||"auto"===r&&-1!==o.indexOf("by_price")?n.hasOwnProperty(o)||(n[o]=null):n.hasOwnProperty(o)?(i=n[o],PMPRUtil.isEmpty(i)||(s=i+","+s),n[o]=s):n[o]=s})),PMPRUtil.updateQueryString(n)})).on("input",(function(){PMPRUtil.getSettingByPath("auto_submit")&&l()(this).filterAutoSubmit()})),e.find("input:checked").each((function(e,t){let i=(t=l()(t)).attr("id"),n=t.closest("li");if(!PMPRUtil.isEmpty(t)){let e=t.parents().find("li.has-child");PMPRUtil.isEmpty(e)||e.each((function(e,t){if((t=l()(t)).find("#"+i).length>0&&n.get(0)!==t.get(0)){let e=t.find(".filter-list-plus").first();PMPRUtil.isEmpty(e)||e.trigger("click")}}))}}))})),(i=jQuery).fn.removeFilterField=function(e=!1){let t,l,n=i(this);if(t=n.data("filter"),t=i("#filter-"+t),l=n.closest("form"),!PMPRUtil.isEmpty(t)){if(l.find(".overlay").removeClass("d-none"),e)i(".selected-items").remove(),l.find("select, input").not(".preview").val(""),l.find('input[type="radio"]').removeAttr("checked"),l.find('input[type="checkbox"]').removeAttr("checked");else{let e=n.closest(".selected-items"),i=t.find('[name="'+n.data("name")+'"]');if(!PMPRUtil.isEmpty(i)){let t=n.data("value");i.is(":checkbox")||i.is(":radio")?i.filter('[data-id="'+t+'"]').prop("checked",!1):i.is("select")&&i.find('option[value="'+t+'"]').prop("selected",!1),n.remove(),1===e.children().length&&e.remove()}}l.filterAutoSubmit()}},i.fn.filterAutoSubmit=function(){let e=i(this);PMPRUtil.isEmpty(i("#filter-form").find('[data-filter="by_price"]'))&&e.data("submit","auto"),e.trigger("submit")},i.fn.collapse=function(e,t){let l,n=i(this);l=i(n.attr("href")),PMPRUtil.isEmpty(l)||(n.toggleClass(e),l.toggleClass(t))}})();